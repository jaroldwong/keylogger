<p id="notice"><%= notice %></p>

<!-- <h1>Key Inventory</h1> -->

<ul class="nav nav-tabs">
  <li class="<%= active_tab?(keys_path) %> <%= active_tab?(root_path) %>">
    <%= link_to "Inventory", keys_path %>
  </li>
  <li class="<%= active_tab?(filtered_keys_path(:unassigned)) %>">
    <%= link_to "Unassigned", filtered_keys_path(:unassigned) %>
  </li>
  <li class="<%= active_tab?(filtered_keys_path(:missing)) %>">
    <%= link_to "Missing", filtered_keys_path(:missing) %>
  </li>
</ul>

<table class="table table-striped">
  <thead>
    <tr>
      <th>Serial Number</th>
      <th>Key Class</th>
      <th>Department</th>
      <th>Issued</th>
      <th>Door Access</th>
      <!-- <th colspan="3"></th> -->
    </tr>
  </thead>

  <tbody>
    <% @keys.each do |key| %>
      <tr data-link="<%= edit_key_path(key) %>">
        <td><%= key.serial_no %></td>
        <td><%= key.key_class %></td>
        <td>
          <% if key.person.nil? %>
            <%= "Unassigned" %>
          <% else %>
            <%= key.person.departments.first.name %>
          <% end %>
        </td>
        <td>
          <% if key.person.nil? %>
            <%= "Unassigned" %>
          <% else %>
            <%= key.person.name %>
          <% end %>
        </td>
        <td><%= key.locations.join(', ') %></td>
<!--
        <td><%= link_to 'Show', key %></td>
        <td><%= link_to 'Edit', edit_key_path(key) %></td>
        <td><%= link_to 'Destroy', key, method: :delete, data: { confirm: 'Are you sure?' } %></td>
-->
      </tr>
    <% end %>
  </tbody>
</table>

<br>
<!--
<%= link_to 'New Key', new_key_path %>
 -->
